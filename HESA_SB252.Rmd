---
title: "HESA - SB252 (Student Statistics UK 2017/18)"
output:
  html_document:
    df_print: paged
  github_document: default
  html_notebook: default
---

```{r setup}
library(tidyverse)
library(ggvis)
```

# HESA - SB252 (Student Statistics UK 2017/18)
## Data import

Data downloaded from https://www.hesa.ac.uk/news/17-01-2019/sb252-higher-education-student-statistics

"This Statistical Bulletin is the annual first release of HESA student data. In previous years, our statistical bulletins were known as statistical first releases. We have changed the name to align with terminology used by other official statistics producers.

This bulletin covers higher education (HE) providers who submit a full Student record data return to HESA. This includes publicly funded Higher Education Institutions, the privately funded University of Buckingham, and HE level provision at Further Education (FE) Colleges in Wales (accounting for 1,670 students in 2017/18)."


```{r}
# import data, but exclude initial explanation rows

df <- read_csv("data/SB252_Student_UK_2017-18/figure-14.csv", skip = 17, col_names = TRUE)
df  # (134880 rows x 8 cols)
```


* `Subject Area` <chr> : (1-9, A-J, 3 totals)
* `First year marker` <chr> : 'First year'/'Other years'/All
* `Level of study` <chr> : (4 types, 2 sub-totals, total)
* `Mode of study` <chr> : Full-time/Part-time/All
* `Country of HE provider` <chr> : England/'Northern Ireland'/Scotland/Wales/All
* `Sex` <chr> : Female/Male/Other/Total
* `Academic Year` <chr> : eg. 2013/14
* `Number` <int> : quantity of students


## Data cleaning : rows

```{r}
# filter out rows that are totals. Note the use of `!` with `%in%` for lists

df <- df %>% filter(!`Subject Area` %in% c("Total", "Total - Non-science subject areas", "Total - Science subject areas")) %>% filter(`First year marker` != "All") %>% filter(!`Level of study` %in% c("All", "All postgraduate", "All undergraduate")) %>% filter(`Mode of study` != "All") %>% filter(`Country of HE provider` != "All") %>% filter(Sex != "Total")

df  # (17220 rows x 8 cols)
```


## Basic EDA

```{r}
# check that total still matches

df %>% count(Number)
df %>% nrow()

df %>% summarize(sum(Number))   # 11506415 ...total of all 5 years

df %>% group_by(`Academic Year`) %>% summarize(sum(Number))  # all a couple of '00 low ?
df %>% group_by(`Academic Year`, Sex) %>% summarize(sum(Number))
df %>% group_by(`Academic Year`, `Subject Area`) %>% summarize(sum(Number))  # all +/- 5-30
df %>% group_by(`Academic Year`, `Subject Area`, Sex) %>% summarize(sum(Number))
```





